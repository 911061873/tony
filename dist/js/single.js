$(document).ready((function(){new Vue({el:"main",data:()=>({site_url:window.site_url,post_id:window.post_id,m:window.index_m,pwd:window.pwd,color:window.color,display_author:window.display_author,author_div:"",posts:null,loading:!0,errored:!0,cate:"分类目录",cate_url:"",post_tags:[],post_prenext:[],exist_index:!0,reading_p:0}),mounted(){axios.get(this.site_url+"/wp-json/wp/v2/posts/"+this.post_id).then((t=>{this.posts=t.data})).catch((t=>{this.errored=!1})).then((()=>{if(this.loading=!1,this.cate=this.posts.post_categories[0].name,this.cate_url=this.posts.post_categories[0].link,this.post_tags=this.posts.post_tags,this.post_prenext=this.posts.post_prenext,$(".real").css("display","block"),this.pwd)$(".article-content").attr("style","");else if(this.m){tm=texmath.use(katex);var t=window.markdownit({html:!0,xhtmlOut:!1,breaks:!0,linkify:!0}).use(tm,{delimiters:"dollars",macros:{"\\RR":"\\mathbb{R}"}}).render(this.posts.md_content);$(".article-content").html(t).attr("style","")}else $(".article-content").html(this.posts.content.rendered).attr("style","");if($(".single-h2").html(this.posts.post_metas.title.replace("密码保护：","")).attr("style",""),this.display_author&&(this.author_div='<span class="article-list-date">'+this.posts.post_metas.author+'</span><span class="article-list-divider">&nbsp;&nbsp;/&nbsp;&nbsp;</span>'),$(".article-list-footer").html(this.author_div+'<span class="article-list-date">'+this.posts.post_date+'</span><span class="article-list-divider">&nbsp;&nbsp;/&nbsp;&nbsp;</span><span class="article-list-minutes">'+this.posts.post_metas.views+"&nbsp;Views</span>").attr("style",""),this.color){var s=$(".article-content").offset().top,i=$(".article-content").innerHeight();$(window).scroll((function(){$(this).scrollTop()>s?$(this).scrollTop()-s<=i?this.reading_p=Math.round(($(this).scrollTop()-s)/i*100):this.reading_p=100:this.reading_p=0,$(".reading-bar").css("width",this.reading_p+"%")}))}var e=0,a=23,o=0;$("#article-index").html("");var n=count_in=count_ar=count_sc=count_hr=count_e=1,c=new Array,l=0,r=0,p="";$(".article-content>:header").each((function(){e=$(this).eq(0).prop("tagName").replace("H",""),0==r?(l=e,r++):e<=l&&(l=e)})),$(".article-content>:header").each((function(){for(e=$(this).eq(0).prop("tagName").replace("H",""),o=0;o<Math.abs(e-l);++o)a+=10;p=23!==a?"czs-square-l":"czs-circle-l",$("#article-index").html($("#article-index").html()+'<li id="ti'+n+++'" style="padding-left:'+a+'px"><a><i class="'+p+'"></i>  '+$(this).eq(0).text().replace(/[ ]/g,"")+"</a></li>"),$(this).eq(0).attr("id","in"+count_in++),c[0]=0,c[count_ar++]=$(this).eq(0).offset().top,count_e++,a=23,o=0})),$("#article-index li").click((function(){$("html,body").animate({scrollTop:$("#in"+$(this).eq(0).attr("id").replace("ti","")).offset().top-100},500)})),1!==count_e?$(window).scroll((function(){var t=$(this).scrollTop()+130,s=c[count_sc],i=c[count_sc-1];t>=s&&($("#ti"+(count_sc-1)).attr("class",""),$("#ti"+count_sc).attr("class","active"),count_sc++),t<=i&&($("#ti"+(count_sc-2)).attr("class","active"),count_sc--,$("#ti"+count_sc).attr("class",""))})):($(".index-div").css("display","none"),this.exist_index=!1),document.querySelectorAll("pre code").forEach((t=>{hljs.highlightBlock(t)}))}))}})}));